---
const blogPosts = await Astro.glob('../../pages/blogs/*.md');

const sortedPosts = blogPosts
    .filter(post => post.frontmatter?.publishDate)
    .sort((a, b) => new Date(b.frontmatter.publishDate).getTime() - new Date(a.frontmatter.publishDate).getTime())
    .slice(0, 5);
---

<div class="box">
    <h3 class="title is-5"><i class="fas fa-rocket"></i> Recent Posts</h3>
    <div class="content">
        {sortedPosts.length > 0 ? (
            <ul>
                {sortedPosts.map(post => {
                    const filename = post.file.split('/').pop()?.replace('.md', '');
                    return (
                        <li>
                            <a class="recent-post" href={`/blogs/${filename}`}>
                                {post.frontmatter.title || filename}
                            </a>
                        </li>
                    );
                })}
            </ul>
        ) : (
            <p class="has-text-grey">No posts available yet.</p>
        )}
    </div>
</div>
