<nav
    class="navbar is-fixed-top custom-navbar"
    role="navigation"
    aria-label="main navigation"
>
    <div class="navbar-brand">
        <a class="brand ml-4" href="/" style="display: flex; align-items: center; gap: 0.5rem;">
            <img src="/img/markus-witchter.png" alt="Markus the Astronaut Witchter" style="height: 36px; border-radius: 50%; object-fit: cover;" />
            <span class="brand-text">Blog.AstronautMarkus.Dev</span>
        </a>
        <a
            role="button"
            class="navbar-burger"
            aria-label="menu"
            aria-expanded="false"
            data-target="navbarBasic"
        >
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="navbarBasic" class="navbar-menu">
        <div class="navbar-end">
            <a class="navbar-item" href="/">Home</a>
            <a class="navbar-item" href="/posts">Posts</a>
            <a class="navbar-item" href="/contact">Contact</a>
            <a class="navbar-item" href="/author-notes">Author Notes</a>
            <div class="navbar-item">
                <button id="theme-toggle" class="button is-ghost" title="Toggle theme">
                    <span class="icon">
                        <i id="theme-icon" class="fa-regular fa-lightbulb"></i>
                    </span>
                </button>
            </div>
        </div>
    </div>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const html = document.documentElement;
        
        // Detect system preference
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const systemTheme = systemPrefersDark ? 'dark' : 'light';
        
        // Use saved theme or system preference
        const currentTheme = localStorage.getItem('theme') || systemTheme;
        html.setAttribute('data-theme', currentTheme);
        updateIcon(currentTheme);
        
        if (themeToggle) {
            themeToggle.addEventListener('click', function() {
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateIcon(newTheme);
            });
        }
        
        function updateIcon(theme: any) {
            if (!themeIcon) return;
            if (theme === 'dark') {
                themeIcon.className = 'fas fa-moon';
            } else {
                themeIcon.className = 'fa-regular fa-sun';
            }
        }
    });
</script>
